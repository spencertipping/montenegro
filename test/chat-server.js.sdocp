sdocp('sdoc::js::test/chat-server', 'A trivial chat server.\n\ncaterwaul.clone(\'std seq montenegro\')(function () {\n  caterwaul.montenegro.server(8080) /se[\n    // Server code:\n    _.rpc(\'/chat/listen\', fn_[clients.push(this)]).rpc(\'/chat/send\', fn[message][seq[clients *![_(message)]], clients = seq[~[]], this(\'OK\')]), where[clients = seq[~[]]],\n\n    // Client code:\n    _.html(\'/\', qs[caterwaul.montenegro.rpc(\'/chat/listen\')(fn[message][$(\'.log\').append(html[div.message(message)]), this()]),\n                   let*[send = caterwaul.montenegro.rpc(\'/chat/send\')] in\n                   $(\'body\').append(html[div.log(input /enter_key(fn_[send($(this).val()), $(this).val(\'\')]))])])]})();');