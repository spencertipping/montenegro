A trivial chat server.

caterwaul.clone('std seq montenegro')(function () {
  let[clients = seq[~[]]] in
  caterwaul.montenegro.server(8080) /se[
    _.rpc('/chat', fn_[clients.push(this)]).rpc('/chat/send', fn[message][clients.each(fn[c][c(message)]), clients = seq[~[]], this('OK')]),
    _.html('/chat/app', fn_[$('body').append('Chat application')])]})();
